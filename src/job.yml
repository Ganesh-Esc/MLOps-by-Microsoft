$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
# FIX: Use the current directory relative to the job.yml file's location (which is src/)
# This resolves the Validation error: "Can't find directory...src/src"
code: . 
command: >-
  # FIX: Keep the command simple. Since 'code: .' uploads the contents of src/
  # the train.py file should be in the root of the uploaded code package.
  python train.py 
  --training_data ${{inputs.training_data}}
  --reg_rate ${{inputs.reg_rate}}
inputs:
  training_data:
    type: uri_folder
    # CRITICAL FIX: Ensures data is downloaded locally for train.py
    mode: download
    path: azureml:diabetes-dev-folder:latest
  reg_rate: 0.01
environment: azureml:AzureML-sklearn-0.24-ubuntu18.04-py37-cpu@latest
compute: azureml:aml-cpu
experiment_name: diabetes-training
description: Command job to train the diabetes model using the compliant data asset.
