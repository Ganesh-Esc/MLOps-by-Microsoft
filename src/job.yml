$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
# The directory to upload (relative to where the 'az ml job create' command is run, 
# which is the GitHub Actions repository root: /home/runner/work/MLOps-by-Microsoft/MLOps-by-Microsoft/)
code: ./src 
command: >-
  # The command runner's working directory is often /mnt/code, 
  # which contains the content of the 'code' path (i.e., train.py is directly inside /mnt/code)
  python train.py 
  --training_data ${{inputs.training_data}}
  --reg_rate ${{inputs.reg_rate}}
inputs:
  training_data:
    type: uri_folder
    # FIX: Ensures the URI is converted to a local path for train.py's os.path.exists() check
    mode: download
    path: azureml:diabetes-dev-folder:latest
  reg_rate: 0.01
environment: azureml:AzureML-sklearn-0.24-ubuntu18.04-py37-cpu@latest
compute: azureml:aml-cpu
experiment_name: diabetes-training
description: Command job to train the diabetes model using the compliant data asset.
